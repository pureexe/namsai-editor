<div ng-if="!notFoundRepo">
  <div ng-include="'views/header.html'" ></div>
  <div>
    <md-whiteframe class="md-whiteframe-2dp" layout layout-align="center center">
      <md-toolbar class="" style="background-color:#fff;color:#616161;">
          <div class="md-toolbar-tools">
            <md-button class="md-icon-button" aria-label="Login" ng-click="gotoBack();">
              <i class="material-icons">arrow_back</i>
            </md-button>
            <span flex style="text-align: center">
              {{appName}}
            </span>
            <md-button class="md-icon-button" aria-label="Login" ng-click="gotoPath(appPath+'/message')">
              <i class="material-icons">message</i>
            </md-button>
            <md-button class="md-icon-button" aria-label="Login" ng-click="gotoPath(appPath+'/dasboard')">
              <i class="material-icons">dashboard</i>
            </md-button>
            <md-button class="md-icon-button" aria-label="Login" ng-click="gotoPath(appPath+'/history')">
              <i class="material-icons">history</i>
            </md-button>
            <md-button class="md-icon-button" aria-label="Login" ng-click="gotoPath(appPath+'/settings')">
              <i class="material-icons">settings</i>
            </md-button>
          </div>
        </md-toolbar>
    </md-whiteframe>
  </div>
  <div class="app-container" layout="row">
    <div flex="25" layout="column" style="position:relative;">
      <md-whiteframe class="md-whiteframe-1dp" style="margin:10px;height:calc(100% - 20px);background-color:#fff;position:relative">
        <div ng-if="stories" style=" height: 100%;">
          <md-whiteframe class="md-whiteframe-1dp" layout layout-align="center center">
            <md-toolbar class="" style="background-color:#fff;color:#616161;">
                <div class="md-toolbar-tools">
                  <md-input-container md-no-float class="md-block" style="width:100%;">
                    <input ng-model="search" type="text" placeholder="Search">
                  </md-input-container>
                </div>
              </md-toolbar>
          </md-whiteframe>
          <div class="full-without-header">
            <md-list>
              <div ng-repeat="story in stories">
                <md-list-item  ng-click="chooseTopic(story.id);">
                  <p ng-if="story.name">{{story.name}}</p>
                  <p ng-if="!story.name" style="color:#9f9f9f">Topic</p>
                </md-list-item>
                <md-divider></md-divider>
              </div>
            </md-list>
          </div>
        </div>
        <div ng-if="!stories" style="width:100%;height:100%;" layout layout-align="center center">
          <div>Add new topic by tap (+) button</div>
        </div>
        <div style="position:absolute;right:0px;bottom:5px;">
          <md-button class="md-fab md-primary" aria-label="Add" ng-click="topicAdd();">
              <md-icon md-font-set="material-icons">add</md-icon>
          </md-button>
        </div>
      </md-whiteframe>
    </div>
    <div flex="50" layout="column">
      <md-whiteframe class="md-whiteframe-1dp" style="margin-top:10px;margin-bottom:10px;height:100%;background-color:#fff;overflow-y: auto;">
        <div ng-if="topic">
          <md-whiteframe class="md-whiteframe-1dp" layout layout-align="center center">
            <md-toolbar class="" style="background-color:#fff;color:#616161;">
                <div class="md-toolbar-tools">
                  <md-input-container md-no-float class="md-block">
                    <input ng-model="topic.name" ng-change="topicNameChange()" type="text" placeholder="Topic">
                  </md-input-container>
                  <span flex>
                  </span>
                  <md-menu md-position-mode="target-right target" >
                    <md-button  class="md-icon-button" aria-label="Create node" ng-click="$mdOpenMenu($event)">
                      <i class="material-icons">create</i>
                    </md-button>
                    <md-menu-content>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('pattern')">
                          Pattern
                        </md-button>
                      </md-menu-item>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('response')">
                          Response
                        </md-button>
                      </md-menu-item>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('variable')">
                          Operation
                        </md-button>
                      </md-menu-item>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('condition')">
                          Condition
                        </md-button>
                      </md-menu-item>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('webhook')">
                          Webhook
                        </md-button>
                      </md-menu-item>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('bookmark_entry')">
                          Bookmark (Entry)
                        </md-button>
                      </md-menu-item>
                      <md-menu-item>
                        <md-button ng-click="topicAddNode('bookmark_jump')">
                          Bookmark (Jump)
                        </md-button>
                      </md-menu-item>
                    </md-menu-content>
                </md-menu>
                  <md-button class="md-icon-button" aria-label="Login" ng-click="topicDelete(topic.id)">
                    <i class="material-icons">delete</i>
                  </md-button>
                </div>
              </md-toolbar>
          </md-whiteframe>
          <div ng-include="'views/nodelist3.html'"></div>
        </div>
        <div ng-if="!topic" style="width:100%;height:100%;" layout layout-align="center center">
          <div>Choose topic from left panel</div>
        </div>
      </md-whiteframe>
    </div>
    <div flex="25" layout="column">
      <md-whiteframe class="md-whiteframe-1dp" style="margin:10px;height:100%;background-color:#fff;padding:20px;">
        Not Avaliable Untill Next patch
      </md-whiteframe>
    </div>
  </div>
</div>
<div ng-if="notFoundRepo">
  <div ng-include="'views/status404.html'" ></div>
</div>
